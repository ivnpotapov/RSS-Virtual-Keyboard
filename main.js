(()=>{"use strict";function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}const t=function(){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.code=e.code,this.enKey=e.enKey,this.ruKey=e.ruKey,this.enKeyShift=e.enKeyShift?e.enKeyShift:e.enKey,this.ruKeyShift=e.ruKeyShift?e.ruKeyShift:e.ruKey,this.type=e.type,this.preSet=r}var r,i;return r=t,(i=[{key:"addButton",value:function(){return this.button=document.createElement("button"),this.button.classList.add("key"),this.button.setAttribute("name",this.code),this.button.setAttribute("type","button"),this.setButton(this.preSet),this.button}},{key:"setButton",value:function(e){this.lang=e.isLang?"ru":"en",this.isCapsLock=e.isCapsLock,this.isShift=e.isShift?"Shift":"",this.button.innerHTML="",this.isShift&&!this.type?this.key=this["".concat(this.lang,"KeyShift")]:this.isCapsLock?this.key=this["".concat(this.lang,"Key")]:this.key=this["".concat(this.lang,"Key")].toLowerCase(),this.button.textContent=this.key,this.type&&(this.type.size&&this.button.classList.add("key".concat(this.type.size)),this.type.color&&this.button.classList.add("key_type_colored"))}}])&&e(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function r(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const a=function(){function e(t,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"setTextarea",(function(e,t,r,n,o){i.textarea.value="".concat(i.textarea.value.slice(0,t+n)).concat(e).concat(i.textarea.value.slice(t+o)),i.textarea.selectionStart=t+r,i.textarea.selectionEnd=t+r})),o(this,"handleKey",(function(e){var t=i.textarea.selectionStart,r=e.target.name?e.target.name:e.code;switch(r){case"ControlLeft":case"ControlRight":case"AltLeft":case"AltRight":case"MetaLeft":break;case"ShiftLeft":case"ShiftRight":i.preSet.isShift=!0,i.setKeyboard();break;case"CapsLock":i.preSet.isCapsLock=!i.preSet.isCapsLock,i.setKeyboard();break;case"Backspace":i.setTextarea("",t,-1,-1,0);break;case"Delete":i.setTextarea("",t,0,0,1);break;case"Enter":i.setTextarea("\n",t,1,0,0);break;case"Tab":i.setTextarea("\t",t,1,0,0);break;default:i.setTextarea(i.keyboardElements[r].key,t,1,0,0)}})),this.preSet=localStorage.getItem("preSet")?JSON.parse(localStorage.getItem("preSet")):{isLang:!1,isCapsLock:!1,isShift:!1},this.buttonsData=t,this.textarea=r,this.keyboardElements={},this.keyboardNodes={}}var i,a;return i=e,(a=[{key:"renderer",value:function(){var e=this;return this.keyboard=document.createElement("div"),this.keyboard.classList.add("keyboard"),this.buttonsData.forEach((function(r){var i=document.createElement("div");i.classList.add("keyboard__row"),r.forEach((function(r){var n=new t(r,e.preSet);e.keyboardElements[r.code]=n,e.keyboardNodes[r.code]=n.addButton(),i.append(e.keyboardNodes[r.code])})),e.keyboard.append(i)})),this.addListeners(),this.setKeyboard(),this.keyboard}},{key:"setKeyboard",value:function(){var e=this;this.preSet.isCapsLock?this.keyboardNodes.CapsLock.classList.add("key_type_active"):this.preSet.isCapsLock||this.keyboardNodes.CapsLock.classList.remove("key_type_active"),localStorage.setItem("preSet",JSON.stringify(this.preSet)),Object.values(this.keyboardElements).forEach((function(t){t.setButton(e.preSet)}))}},{key:"addListeners",value:function(){var e=this;document.addEventListener("keydown",(function(t){t.preventDefault(),t.shiftKey&&t.altKey&&(e.preSet.isLang=!e.preSet.isLang,e.setKeyboard()),e.keyboardNodes[t.code]&&(e.handleKey(t),"CapsLock"!==t.code&&e.keyboardNodes[t.code].classList.add("key_type_active"))})),document.addEventListener("keyup",(function(t){t.preventDefault(),"ShiftLeft"!==t.code&&"ShiftRight"!==t.code||(e.preSet.isShift=!1,e.setKeyboard()),e.keyboardNodes[t.code]&&"CapsLock"!==t.code&&e.keyboardNodes[t.code].classList.remove("key_type_active")})),this.keyboard.addEventListener("mousedown",(function(t){t.preventDefault(),e.keyboardNodes[t.target.name]&&(e.handleKey(t),"CapsLock"!==t.target.name&&e.keyboardNodes[t.target.name].classList.add("key_type_active"))})),this.keyboard.addEventListener("mouseup",(function(t){t.preventDefault(),!t.target.name||"ShiftLeft"!==t.target.name&&"ShiftRight"!==t.target.name||(e.preSet.isShift=!1,e.setKeyboard()),r(t.target.classList).includes("key_type_active")&&"CapsLock"!==t.target.name&&t.target.classList.remove("key_type_active")})),this.keyboard.addEventListener("mouseout",(function(t){!t.target.name||"ShiftLeft"!==t.target.name&&"ShiftRight"!==t.target.name||(e.preSet.isShift=!1,e.setKeyboard()),r(t.target.classList).includes("key_type_active")&&"CapsLock"!==t.target.name&&t.target.classList.remove("key_type_active")}))}}])&&n(i.prototype,a),Object.defineProperty(i,"prototype",{writable:!1}),e}(),y=[[{code:"Backquote",enKey:"`",ruKey:"Ё",enKeyShift:"~"},{code:"Digit1",enKey:"1",ruKey:"1",enKeyShift:"!",ruKeyShift:"!"},{code:"Digit2",enKey:"2",ruKey:"2",enKeyShift:"@",ruKeyShift:'"'},{code:"Digit3",enKey:"3",ruKey:"3",enKeyShift:"#",ruKeyShift:"№"},{code:"Digit4",enKey:"4",ruKey:"4",enKeyShift:"$",ruKeyShift:";"},{code:"Digit5",enKey:"5",ruKey:"5",enKeyShift:"%",ruKeyShift:"%"},{code:"Digit6",enKey:"6",ruKey:"6",enKeyShift:"^",ruKeyShift:":"},{code:"Digit7",enKey:"7",ruKey:"7",enKeyShift:"&",ruKeyShift:"?"},{code:"Digit8",enKey:"8",ruKey:"8",enKeyShift:"*",ruKeyShift:"*"},{code:"Digit9",enKey:"9",ruKey:"9",enKeyShift:"(",ruKeyShift:"("},{code:"Digit0",enKey:"0",ruKey:"0",enKeyShift:")",ruKeyShift:")"},{code:"Minus",enKey:"-",ruKey:"-",enKeyShift:"_",ruKeyShift:"_"},{code:"Equal",enKey:"=",ruKey:"=",enKeyShift:"+",ruKeyShift:"+"},{code:"Backspace",enKey:"backspace",ruKey:"backspace",enKeyShift:"backspace",ruKeyShift:"backspace",type:{size:"_type_duble",color:!0}}],[{code:"Tab",enKey:"tab",ruKey:"tab",enKeyShift:"tab",ruKeyShift:"tab",type:{size:!1,color:!0}},{code:"KeyQ",enKey:"Q",ruKey:"Й"},{code:"KeyW",enKey:"W",ruKey:"Ц"},{code:"KeyE",enKey:"E",ruKey:"У"},{code:"KeyR",enKey:"R",ruKey:"К"},{code:"KeyT",enKey:"T",ruKey:"Е"},{code:"KeyY",enKey:"Y",ruKey:"Н"},{code:"KeyU",enKey:"U",ruKey:"Г"},{code:"KeyI",enKey:"I",ruKey:"Ш"},{code:"KeyO",enKey:"O",ruKey:"Щ"},{code:"KeyP",enKey:"P",ruKey:"З"},{code:"BracketLeft",enKey:"[",ruKey:"Х",enKeyShift:"{"},{code:"BracketRight",enKey:"]",ruKey:"Ъ",enKeyShift:"}"},{code:"Backslash",enKey:"\\",ruKey:"\\",enKeyShift:"|",ruKeyShift:"/"},{code:"Delete",enKey:"del",ruKey:"del",enKeyShift:"del",ruKeyShift:"del",type:{size:!1,color:!0}}],[{code:"CapsLock",enKey:"capslock",ruKey:"capslock",enKeyShift:"capslock",ruKeyShift:"capslock",type:{size:"_type_duble",color:!0}},{code:"KeyA",enKey:"A",ruKey:"Ф"},{code:"KeyS",enKey:"S",ruKey:"Ы"},{code:"KeyD",enKey:"D",ruKey:"В"},{code:"KeyF",enKey:"F",ruKey:"А"},{code:"KeyG",enKey:"G",ruKey:"П"},{code:"KeyH",enKey:"H",ruKey:"Р"},{code:"KeyJ",enKey:"J",ruKey:"О"},{code:"KeyK",enKey:"K",ruKey:"Л"},{code:"KeyL",enKey:"L",ruKey:"Д"},{code:"Semicolon",enKey:";",ruKey:"Ж",enKeyShift:":"},{code:"Quote",enKey:"'",ruKey:"Э",enKeyShift:'"'},{code:"Enter",enKey:"enter",ruKey:"enter",type:{size:"_type_duble",color:!0}}],[{code:"ShiftLeft",enKey:"shift",ruKey:"shift",enKeyShift:"shift",ruKeyShift:"shift",type:{size:"_type_duble",color:!0}},{code:"KeyZ",enKey:"Z",ruKey:"Я"},{code:"KeyX",enKey:"X",ruKey:"Ч"},{code:"KeyC",enKey:"C",ruKey:"С"},{code:"KeyV",enKey:"V",ruKey:"М"},{code:"KeyB",enKey:"B",ruKey:"И"},{code:"KeyN",enKey:"N",ruKey:"Т"},{code:"KeyM",enKey:"M",ruKey:"Ь"},{code:"Comma",enKey:",",ruKey:"Б",enKeyShift:"<"},{code:"Period",enKey:".",ruKey:"Ю",enKeyShift:">"},{code:"Slash",enKey:"/",ruKey:".",enKeyShift:"?",ruKeyShift:","},{code:"ArrowUp",enKey:"▲",ruKey:"▲",enKeyShift:"▲",ruKeyShift:"▲",type:{size:!1,color:!0}},{code:"ShiftRight",enKey:"shift",ruKey:"shift",enKeyShift:"shift",ruKeyShift:"shift",type:{size:"_type_duble",color:!0}}],[{code:"ControlLeft",enKey:"ctrl",ruKey:"ctrl",enKeyShift:"ctrl",ruKeyShift:"ctrl",type:{size:!1,color:!0}},{code:"MetaLeft",enKey:"win",ruKey:"win",type:{size:!1,color:!0}},{code:"AltLeft",enKey:"alt",ruKey:"alt",type:{size:!1,color:!0}},{code:"Space",enKey:" ",ruKey:" ",enKeyShift:" ",ruKeyShift:" ",type:{size:"_type_max",color:!0}},{code:"AltRight",enKey:"alt",ruKey:"alt",type:{size:"_type_duble",color:!0}},{code:"ArrowLeft",enKey:"◄",ruKey:"◄",enKeyShift:"◄",ruKeyShift:"◄",type:{size:!1,color:!0}},{code:"ArrowDown",enKey:"▼",ruKey:"▼",enKeyShift:"▼",ruKeyShift:"▼",type:{size:!1,color:!0}},{code:"ArrowRight",enKey:"►",ruKey:"►",enKeyShift:"►",ruKeyShift:"►",type:{size:!1,color:!0}},{code:"ControlRight",enKey:"ctrl",ruKey:"ctrl",type:{size:!1,color:!0}}]];function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.body=document.body,this.title="RSS Virtual Keyboard",this.descrFirst="Клавиатура создана в операционной системе Windows",this.descrSecond="Для переключения языка комбинация: левыe Alt + Shift"}var t,r;return t=e,(r=[{key:"setNode",value:function(e,t,r){return this.node=document.createElement(t),this.node.className=r,e.append(this.node),this.node}},{key:"setNodeText",value:function(e,t,r,i){return this.node=document.createElement(t),this.node.className=r,this.node.textContent=i,e.append(this.node),this.node}},{key:"setInitialNodes",value:function(){this.container=this.setNode(this.body,"div","container"),this.setNodeText(this.container,"h1","container__title",this.title),this.main=this.setNode(this.container,"div","main"),this.setNodeText(this.container,"p","container__descr",this.descrFirst),this.setNodeText(this.container,"p","container__descr",this.descrSecond),this.textarea=this.setNode(this.main,"textarea","textarea"),this.textarea.focus(),this.keyboardNode=new a(y,this.textarea),this.main.append(this.keyboardNode.renderer())}},{key:"setKeyboard",value:function(){this.keyboardNode.setKeyboard()}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())).setInitialNodes()})();